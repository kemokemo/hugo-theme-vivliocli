<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Getting Started</title><link rel="shortcut icon" type=image/x-icon href=../../img/favicon.ico><link rel=stylesheet href=../../css/vivlio-theme-manual.css></head><body><aside id=menu><input type=checkbox id=humburger-btn-check>
<label for=humburger-btn-check class=humburger-btn><span></span></label><div class=menu-content><section id=menu-header><div class=logo><img src=../../img/logo.png></div></section><h4><a href=../../jp/>Hugo theme for Vivliosytle-cli.</a></h4><ul><li><a href=../../jp/GettingStarted.html>Getting Started</a><ul><li><a href=../../jp/GettingStarted/GettingStarted.html class=menu-selected>Getting Started</a></ul><li><a href=../../jp/Configuration.html>hugo-theme-vivliocli</a><li><a href=../../jp/SamplePart.html>Sample Part</a></ul><section id=menu-footer><hr><div class=language-selector><select class=select-language onchange="location=this.value;">
<option id=jp value=/jp/GettingStarted/GettingStarted.html selected>Japanese</option></select></div><div class=menu-footer><a href=../../jp/tags.html>tags</a></div><hr><div class=menu-footer-space></div></section></div></aside><div id=content><nav id=TableOfContents><ul><li><a href=#対象環境>対象環境</a></li><li><a href=#インストール>インストール</a><ul><li><a href=#hugo-theme-vivliocliのインストール>hugo-theme-vivliocliのインストール</a></li><li><a href=#examplesiteからファイルをコピーする>exampleSiteからファイルをコピーする</a></li></ul></li><li><a href=#最初のサイトの作成>最初のサイトの作成</a><ul><li><a href=#configtomlの編集>config.tomlの編集</a></li><li><a href=#表紙の作成>表紙の作成</a></li><li><a href=#configファイルの作成>configファイルの作成</a></li><li><a href=#記事の作成>記事の作成</a></li><li><a href=#ビルド>ビルド</a></li></ul></li><li><a href=#nextstep>NextStep</a></li></ul></nav><h1>Getting Started</h1><h2 id=対象環境>対象環境</h2><p>本解説は Windows 10 を対象環境としています。</p><h2 id=インストール>インストール</h2><p><a href=https://gohugo.io/>Hugo</a>のインストールがまだであればインストールしておきます。<code>v0.68</code>以上に対応しています（フロントマターで<a href=https://gohugo.io/content-management/build-options/#list>_buildオプションのlist</a>を使用しているため）。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>hugo version
:<span style=color:#75715e>: Hugo Static Site Generator v0.80.0 ...</span>
</code></pre></div><p>本テーマでは<a href=https://github.com/vivliostyle/vivliostyle-cli>vivliostyle-cli</a>を利用してPDF出力を行うため、<a href=https://nodejs.org/ja/>Node.js</a>およびvivliostyle-cliのインストールを実施します。以下はchocotaleyを用いた導入例です。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>choco install -y nodejs

node -v
:<span style=color:#75715e>: v15.9.0</span>
:<span style=color:#75715e>: note: vivliostyle-cli is not working in Node v14.0.0</span>

npm -v
:<span style=color:#75715e>: 7.5.3</span>

npm install -g @vivliostyle/cli
vivliostyle -v
:<span style=color:#75715e>: cli: 3.0.3</span>
:<span style=color:#75715e>: core: 2.4.2</span>
</code></pre></div><h3 id=hugo-theme-vivliocliのインストール>hugo-theme-vivliocliのインストール</h3><p>新しいプロジェクトを作成します。ここでは<code>myPDF</code>という名称とします。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>hugo new site myPDF
<span style=color:#66d9ef>cd</span> myPDF
</code></pre></div><p>次にテーマをsubmoduleとして導入します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>git init
git submodule add https://github.com/mochimochiki/hugo-theme-vivliocli themes/hugo-theme-vivliocli
</code></pre></div><p>gitを利用しない場合は、<a href=https://github.com/mochimochiki/hugo-theme-vivliocli/archive/master.zip>zip</a>をダウンロード・解凍し、<code>themes\hugo-theme-vivliocil</code>に配置します。</p><h3 id=examplesiteからファイルをコピーする>exampleSiteからファイルをコピーする</h3><p>テーマの中にテンプレートとして利用できるexampleSiteがあります。exampleSiteから必要なファイルをコピーします。また、デフォルトのconfig.tomlは削除しておきます。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>xcopy /s themes\hugo-theme-vivliocli\exampleSite\config config\
xcopy /s themes\hugo-theme-vivliocli\exampleSite\CI CI\
rm config.toml
</code></pre></div><h2 id=最初のサイトの作成>最初のサイトの作成</h2><h3 id=configtomlの編集>config.tomlの編集</h3><p><code>config\_default\config.toml</code>を開き、以下の行をコメントアウトもしくは削除します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#a6e22e>themesdir</span> = <span style=color:#e6db74>&#34;../..&#34;</span>
</code></pre></div><p>その他のconfigパラメータについては<a href=../Configuration/config.html>ヘルプの構成</a>および<a href=https://gohugo.io/getting-started/configuration/>HUGO公式ドキュメント</a>などを参照してください。</p><h3 id=表紙の作成>表紙の作成</h3><p><code>content</code>ディレクトリ下に<code>jp</code>,<code>en</code>ディレクトリを作成します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=color:#66d9ef>mkdir</span> content\jp
<span style=color:#66d9ef>mkdir</span> content\en
</code></pre></div><p>作成した<code>jp</code>および<code>en</code>下に<code>_pdfcover.md</code>ファイルを作成して以下のように編集し、文字コードUTF-8で保存します。このファイルはサイト上ではサイトトップの<code>index.html</code>となり、PDFでは表紙/前書/目次となります。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>---
type: &#34;vivlio_cover&#34;
url: &#34;myPDF.cover.html&#34;
_build: { list: false }

title: &#34;myPDF&#34;
author: &#34;my name&#34;
toc: true
colophon: false
---

# はじめに

<span style=color:#e6db74>`hugo-theme-vivliocil`</span>を使ってPDF出力。

</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>---
type: &#34;vivlio_cover&#34;
url: &#34;myPDF.cover.html&#34;
_build: { list: false }

title: &#34;myPDF&#34;
author: &#34;my name&#34;
toc: true
colophon: false
---

# Introduction

PDF output using <span style=color:#e6db74>`hugo-theme-vivliocil`</span>.

</code></pre></div><blockquote><p>colophon: true とすると奥付ページも生成されます。<code>_pdfcolophon.md</code>も必要になります。<code>exampleSite\content\jp\_pdfcolophon.md</code>などを参考にしてください。</p></blockquote><h3 id=configファイルの作成>configファイルの作成</h3><p><code>\content\jp</code>および<code>\content\en</code>下に<code>_pdfconfig.md</code>ファイルを作成して以下のように編集し、文字コードUTF-8で保存します。このファイルはHugoビルド後に<code>vivliostyle-cli</code>のconfigファイルとなります。原稿ではないため、フロントマターのみで構成されます。なお、<code>toc</code>と<code>colophon</code>については、<code>_pdfconfig.md</code>と<code>_pdfcover.md</code>で一致させておきます。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>---
type: &#34;vivlio_config&#34;
url: &#34;myPDF.js&#34;
_build: { list: false }

title   : &#34;myPDF&#34;
output : &#34;myPDF_JP.pdf&#34; # or myPDF_EN.pdf
pagesize: &#34;A4&#34;
toc: true
colophon: false
---
</code></pre></div><h3 id=記事の作成>記事の作成</h3><p>次に記事を作成します。<code>\content\jp\Chapter1</code>ディレクトリを作成し、<code>_index.md</code>を作成して以下のように編集します（以下、<code>\content\en</code>下にも適宜同様にします）。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>---
title: Sample Chapter1
role: doc-chapter
weight: 10
---

サンプルチャプター1です。 role: doc-chapter とすることでチャプターを作ることができます。チャプターのindexページの後にも改ページが入るため、短いと少し記事が寂しく見えることになります。
</code></pre></div><div class=note><div class=note_title>Note</div><div class=note_content><p>ディレクトリ名やファイル名はASCII文字で記述してください。日本語を使用すると<code>vivliostyle-cli</code>ビルドに失敗します。（<code>vivliostyle-cli v3.0.3</code>時点）</p></div></div><p>また<code>\content\jp\Chapter1</code>下に<code>second.md</code>, <code>third.md</code>を作成して以下のように編集して保存します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>---
title: &#34;2番目の記事&#34;
weight: 10
---

<span style=color:#75715e>## 2番目の記事
</span><span style=color:#75715e></span>
こんにちは。これは2番目の記事です。
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>---
title: &#34;3番目の記事&#34;
weight: 20
---

<span style=color:#75715e>## 3番目の記事
</span><span style=color:#75715e></span>
こんにちは。これは3番目の記事です。
</code></pre></div><p>以下のコマンドでHugoのプレビューを表示し、記事が表示されることを確認します。記事を編集して保存すると、LiveReloadがかかり、プレビューも更新されます。</p><pre><code>hugo server
</code></pre><h3 id=ビルド>ビルド</h3><p><code>Ctrl+C</code> でhugoのプレビューを終了し、以下のコマンドを実行してHugoサイトをビルドします。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>hugo -e pdf_sample
</code></pre></div><p><code>-e</code>オプションに<code>pdf_sample</code>をつけることで、<code>/config/pdf_sample/config.toml</code>をオーバーライドしています。これは主に<code>isPDF= true</code>とするためです。詳細は<a href=../Configuration/config.html>config.tomlの設定</a>を参照してください。</p><p>これで<code>/public_pdf_sample</code>にHugoサイトがビルドされました。次にこのサイトを<code>vivliostyle-cli</code>でPDF出力します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>vivliostyle build -c .\public_pdf_sample\jp\myPDF.js
</code></pre></div><p><code>vivliostyle-cli</code>のconfigファイルとして<code>myPDF.js</code>を指定しています。このファイルは<code>_pdfconfig.md</code>から生成されたものです。</p><p><code>\public_pdf_sample\jp\myPDF_JP.pdf</code>が成果物です。確認してみましょう。</p><h2 id=nextstep>NextStep</h2><ul><li>PDFの表紙や奥付をカスタマイズするには&mldr;<a href=../Configuration/config.html>config.tomlの設定</a></li><li>複数のエディションや、記事を抜き出した抜粋PDFを作るには&mldr;<a href=../Configuration/edition.html>エディション</a></li><li>記事中の章をPDF目次に表示するには&mldr;<a href=../Configuration/frontmatter.html#pdftoc-pagetoc>各記事のヘッダをPDF目次に表示する</a></li></ul></div></body></html>